<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galeri oonsurno</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: sans-serif; }
        body { background: #121212; color: white; min-height: 100vh; padding: 20px; }
        .header { text-align: center; margin-bottom: 30px; background: #222; padding: 20px; border-radius: 15px; }
        .gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; max-width: 1200px; margin: auto; }
        .card { background: #1e1e1e; border-radius: 12px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.5); text-decoration: none; color: white; }
        .card img { width: 100%; height: 200px; object-fit: cover; background: #333; }
        .card-info { padding: 10px; font-size: 14px; text-align: center; }
    </style>
</head>
<body>

<div class="header">
    <h1 id="judul">Galeri Foto oonsurno</h1>
    <p id="subjudul">Memuat koleksi dari GitHub...</p>
</div>

<div class="gallery" id="gallery">Sedang memuat foto...</div>

<script>
// --- DATA REPOSI ---
const username = "oonsurno";
const repo = "HalamanPublik";

// Load Title (Opsional)
document.getElementById("judul").innerText = localStorage.getItem("judul") || "Galeri Foto oonsurno";
document.getElementById("subjudul").innerText = localStorage.getItem("subjudul") || "Koleksi foto langsung dari GitHub";

async function loadPhotos() {
    const gallery = document.getElementById("gallery");
    try {
        // PERHATIKAN: URL API ini harus ditulis lengkap seperti ini
        const response = await fetch(`https://api.github.com{username}/${repo}/contents/`);
        const files = await response.json();

        if (!Array.isArray(files)) throw new Error("Gagal mengambil daftar file.");

        gallery.innerHTML = ""; // Hapus teks loading

        files.forEach(file => {
            // Filter: Hanya ambil file gambar (.jpg, .png, .webp)
            if (file.name.match(/\.(jpg|jpeg|png|webp|gif)$/i)) {
                const card = document.createElement("a");
                card.className = "card";
                card.href = file.download_url;
                card.target = "_blank";

                // Menampilkan nama file sebagai judul kecil
                let cleanName = file.name.split('.')[0].replace(/[-_]/g, ' ');

                card.innerHTML = `
                    <img src="${file.download_url}" alt="${file.name}">
                    <div class="card-info">
                        <strong>${cleanName}</strong>
                    </div>
                `;
                gallery.appendChild(card);
            }
        });

        if (gallery.innerHTML === "") {
            gallery.innerHTML = "<p>Tidak ada file gambar ditemukan.</p>";
        }

    } catch (err) {
        console.error(err);
        gallery.innerHTML = `<p style="color:red">Gagal memuat: ${err.message}</p>`;
    }
}

// Jalankan fungsi
loadPhotos();
</script>

</body>
</html>
