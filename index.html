<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Galeri Publik oonsurno</title>
<style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
    body { background: #121212; min-height: 100vh; color: white; background-size: cover; background-position: center; background-attachment: fixed; }
    .overlay { background: rgba(0,0,0,0.7); min-height: 100vh; padding: 40px 20px; text-align: center; }
    .header-box { background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; backdrop-filter: blur(10px); margin-bottom: 40px; max-width: 700px; margin: 0 auto 40px auto; border: 1px solid rgba(255,255,255,0.2); }
    .gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; max-width: 1200px; margin: auto; }
    .card { background: #1e1e1e; border-radius: 12px; overflow: hidden; box-shadow: 0 8px 20px rgba(0,0,0,0.5); transition: 0.3s; text-decoration: none; color: white; display: block; }
    .card:hover { transform: translateY(-5px); }
    .card img { width: 100%; height: 250px; object-fit: cover; }
    .card-info { padding: 12px; text-align: left; }
    .card-info h4 { font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
</style>
</head>
<body>

<div class="overlay">
    <div class="header-box">
        <h1 id="judul">Galeri Foto</h1>
        <h3 id="subjudul">Koleksi Terbaru</h3>
    </div>
    <div class="gallery" id="gallery">Memuat foto...</div>
</div>

<script>
// --- KONFIGURASI GITHUB ANDA ---
const username = "oonsurno";
const repo = "HalamanPublik"; // Sesuai nama repo di gambar Anda

// 1. Ambil Setting dari LocalStorage
document.getElementById("judul").innerText = localStorage.getItem("judul") || "Galeri oonsurno";
document.getElementById("subjudul").innerText = localStorage.getItem("subjudul") || "Update dari Repositori GitHub";
let bg = localStorage.getItem("background");
if(bg) document.body.style.backgroundImage = `url(${bg})`;

// 2. Fungsi Ambil Foto Tanpa Folder
async function fetchImages() {
    const container = document.getElementById("gallery");
    try {
        // Mengambil isi root repositori
        const res = await fetch(`https://api.github.com{username}/${repo}/contents/`);
        const data = await res.json();
        
        container.innerHTML = ""; // Bersihkan teks loading

        data.forEach(file => {
            // Hanya ambil file yang berakhiran gambar (jpg, png, webp)
            if (file.name.match(/\.(jpg|jpeg|png|webp|gif)$/i)) {
                const card = document.createElement("a");
                card.className = "card";
                card.href = file.download_url;
                card.target = "_blank";

                // Rapikan nama file untuk judul (hapus FB_IMG_ dan .jpg)
                let cleanName = file.name.replace("FB_IMG_", "").split('.')[0];

                card.innerHTML = `
                    <img src="${file.download_url}" loading="lazy">
                    <div class="card-info">
                        <h4>Foto ID: ${cleanName}</h4>
                    </div>
                `;
                container.appendChild(card);
            }
        });

        if(container.innerHTML === "") container.innerHTML = "Tidak ada foto ditemukan.";

    } catch (err) {
        container.innerHTML = "Gagal memuat foto. Pastikan Repo Publik.";
    }
}

fetchImages();
</script>
</body>
</html>
